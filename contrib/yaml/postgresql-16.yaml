# This is the default minimum version for queries, unless specified otherwise
version: 16
metrics:

#
# PostgreSQL 10
#

# primary_information()
  - queries:
    - query: SELECT
              (
                CASE pg_is_in_recovery() WHEN 'f'
                  THEN 't'
                  ELSE 'f'
                END
              );
      version: 10
      columns:
        - description: Is the PostgreSQL instance the primary
          type: gauge
    tag: postgresql_primary
    sort: name
    collector: primary
    server: both

# database_information()
  - queries:
    - query: SELECT
                datname,
                pg_database_size(datname)
              FROM pg_database;
      version: 10
      columns:
        - name: database
          type: label
        - description: Size of the database
          type: gauge
    tag: pg_database_size
    sort: data
    collector: db

